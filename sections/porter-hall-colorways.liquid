{{ 'porter-hall-colorways.css' | asset_url | stylesheet_tag: preload: true }}

{% if section.blocks.size > 0 %}
<section class="colorways__section" id="section--{{ section.id }}">
  <div class="page-width">
  
    <h2 class="colorways__section--title">{{ section.settings.title }}</h2>

    <div class="colorways__grid {% if section.settings.mobile_slider %} colorways__slider swiper{% endif %}">
      {% if section.settings.mobile_slider %}
      <div class="swiper-wrapper">
      {% endif %}
      {% for block in section.blocks %}
        {% if block.settings.image != blank %}
          <div class="colorway__item{% if section.settings.mobile_slider %} swiper-slide{% endif %}">
            <figure>
              <a href="{{ block.settings.link }}" aria-label="{% if block.settings.color_name != blank %}{{ block.settings.color_name }}{% else %}{{ block.settings.image.alt }}{% endif %}">
              {{ block.settings.image | image_url: width: 1200 | image_tag: width: "100%", loading: "lazy", alt: block.settings.image.alt }}
              </a>
            </figure>
            <div class="colorway__item--content">
              <div class="color__size--wrapper">
                {% if block.settings.color_name != blank %}
                  <h3 class="colorway__name">
                    {% if block.settings.color_image != blank %}
                      <span class="color__image">
                        {{ block.settings.color_image | image_url: width: 1200 | image_tag: width: "100%", loading: "lazy", alt: block.settings.color_image.alt }}
                      </span>
                    {% endif %}
                    <span>{{ block.settings.color_name }}</span>
                  </h3>
                {% endif %}
                {% if block.settings.color_size != blank %}
                  <p class="colorway__size">size: <span>{{ block.settings.color_size }}</span></p>
                {% endif %}
              </div>
              {% if block.settings.color_note != blank %}
              <p class="colorway__note">{{ block.settings.color_note }}</p>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
      {% if section.settings.mobile_slider %}
      </div>
      <div class="colorway-swiper-pagination swiper-pagination"></div>
      {% endif %}
    </div>

    {% if section.settings.button_link != blank and section.settings.button_text != blank %}
      <div class="colorways__section--button">
        <a href="{{ section.settings.button_link }}" class="text__button">
          <span>{{ section.settings.button_text }}</span>
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="17" viewBox="0 0 30 17" fill="none">
              <path d="M29.2071 8.71926C29.5976 8.32873 29.5976 7.69557 29.2071 7.30504L22.8431 0.941086C22.4526 0.550562 21.8195 0.550562 21.4289 0.941086C21.0384 1.33161 21.0384 1.96477 21.4289 2.3553L27.0858 8.01215L21.4289 13.6691C21.0384 14.0596 21.0384 14.6927 21.4289 15.0833C21.8195 15.4738 22.4526 15.4738 22.8431 15.0833L29.2071 8.71926ZM0.5 9.01215H28.5V7.01215H0.5V9.01215Z" fill="currentColor"/>
            </svg>
          </span>
        </a>
      </div>
    {% endif %}
  </div>
</section>
{% endif %}


{% if section.settings.mobile_slider %}
<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    if(window.innerWidth < 768){
      var tradeSwiper = new Swiper(".colorways__slider", {
        loop: true,
        spaceBetween: 16,
        centeredSlides: true,
        slidesPerView: 1.3, 
        pagination: {
          el: ".colorway-swiper-pagination",
        },
      });       
    }
  });  
</script>
{% endif %}

{% schema %}
{
  "name": "Colorways Section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "3 Elegant Colorways"
    },
    {
      "type": "checkbox",
      "id": "mobile_slider",
      "label": "Mobile Slider"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link",
      "default": "/"
    }
  ],
  "blocks": [
    {
      "type": "color",
      "name": "Product Color",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "color_image",
          "label": "Color Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Image Link"
        },
        {
          "type": "text",
          "id": "color_name",
          "label": "Color Name 3",
          "default": "Greystone"
        },
        {
          "type": "text",
          "id": "color_size",
          "label": "Color Size",
          "default": "Double 3' 6'"
        },
        {
          "type": "text",
          "id": "color_note",
          "label": "Color Note"
        },
      ]
    }
  ]
}
{% endschema %}