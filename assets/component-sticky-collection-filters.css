/* -------------------------------------------------------
   Collection Sticky Filters — unified CSS (desktop + mobile)
   Pairs with your current section JS:
   - Desktop: hybrid fixed/dock logic (with +100px buffer from JS)
   - Mobile: CSS sticky using --mobile-sticky-offset (set by small JS)
-------------------------------------------------------- */

/* Layer vars */
:root {
  --filters-z: 60;            /* filter bar (desktop) */
  --filters-z-docked: 1;      /* when docked near footer, sit under header */
  --header-z: 200;            /* header + nav should always be above filters */
}

/* Make sure containers don’t break sticky/fixed with overflow/transform */
.page-width,
.collection-grid__inner {
  overflow: visible !important;
}

/* ---------- DESKTOP (sidebar) ---------- */

/* The column wrapper that contains the filters (your sticky context) */
.sticky-filters-wrap {
  position: relative;        /* needed for docking (absolute) */
  width: 100%;
  max-width: 100%;
}

/* Placeholder keeps layout height when the bar becomes fixed */
.sticky-filters-placeholder {
  height: 0;                 /* JS sets the actual height */
}

/* The sticky bar (contains your {% render 'collection-filters' %}) */
.sticky-filters-bar {
  background: var(--color-background, #fff);
  will-change: transform;
  z-index: var(--filters-z);
}

/* Fixed under header while scrolling grid */
.sticky-filters-bar.is-fixed {
  /* width/left/top are set via JS for perfect column alignment */
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
  z-index: var(--filters-z); /* below the header */
}

/* Docked at the bottom of the section so it never overlaps the footer */
.sticky-filters-bar.is-docked {
  position: absolute !important; /* top/left/width set via JS */
  right: 0;
  box-shadow: none;
  z-index: var(--filters-z-docked);
}

/* Ensure the header layers sit above the filters */
#shopify-section-header,
.header-wrapper,
header[role="banner"],
.header__navigation {
  z-index: var(--header-z) !important;
}

/* Neutralize random margins that can cause visual jumps */
.sticky-filters-bar .collection-filters,
.sticky-filters-bar collection-filters {
  margin: 0 !important;
}

/* ---------- MOBILE (button + section sticky) ---------- */
/* Uses --mobile-sticky-offset computed by the small mobile script. */

@media (max-width: 989px) {
  /* Keep header/nav above the sticky elements */
  #shopify-section-header,
  .header-wrapper,
  header[role="banner"],
  .header__navigation {
    z-index: var(--header-z) !important;
  }

  /* Stick the specified section under header/nav */
  #shopify-section-template--16905854812223__8fcbecee-c2bf-45f1-ab71-1a08ef2f909a {
    position: sticky;
    top: var(--mobile-sticky-offset, 0px);
    z-index: calc(var(--filters-z) + 10);  /* below header, above content */
    background: var(--color-background, #fff);
    will-change: transform;
  }

  /* Stick the mobile filter trigger button under header/nav as well */
  .collection-filters__button.hide-desktop {
    position: sticky;
    top: var(--mobile-sticky-offset, 0px);
    z-index: calc(var(--filters-z) + 20);  /* above section, below header */
    display: block;
    width: 100%;
    background: var(--color-background, #fff);
    pointer-events: auto;
  }
}