:root { --collection-sticky-z: 80; }

/* Ensure upstream wrappers don’t kill sticky/fixed via overflow or transforms */
.page-width, .collection-grid__inner {
  overflow: visible !important;
}

/* Wrap establishes the docking context */
.sticky-filters-wrap {
  position: relative; /* used when docking at the end */
}

/* Placeholder maintains layout height when bar goes fixed */
.sticky-filters-placeholder {
  height: 0;
}

/* Bar styles – keep visual parity; we don’t alter inner markup */
.sticky-filters-bar {
  background: var(--color-background, #fff);
  will-change: transform;
  z-index: var(--collection-sticky-z);
}

/* Fixed state: width/left set via JS to match .page-width */
.sticky-filters-bar.is-fixed {
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}

/* Docked state (just before footer) */
.sticky-filters-bar.is-docked {
  position: absolute !important;  /* top/left/width handled by JS */
  right: 0;
}

/* Make sure header is above us if it’s also sticky/fixed */
#shopify-section-header, .header-wrapper, header[role="banner"] {
  z-index: calc(var(--collection-sticky-z) + 10) !important;
}

/* Neutralize random margins that can cause visual jump */
.sticky-filters-bar .collection-filters,
.sticky-filters-bar collection-filters {
  margin: 0 !important;
}

/* The wrap should be the sidebar column. Ensure it doesn’t expand unexpectedly. */
.sticky-filters-wrap {
  position: relative;
  width: 100%;          /* 100% of the sidebar column only */
  max-width: 100%;
}

/* When fixed, we set explicit width/left via JS; this prevents layout jumps */
.sticky-filters-bar {
  background: var(--color-background, #fff);
  z-index: 80;
}

/* Optional: subtle divider while fixed */
.sticky-filters-bar.is-fixed { box-shadow: 0 1px 0 rgba(0,0,0,.06); }

:root {
  --header-z: 200;   /* header/navigation */
  --filters-z: 60;   /* filter bar when fixed */
}

/* Header + desktop nav should always be above */
#shopify-section-header,
.header-wrapper,
header[role="banner"],
.header__navigation {
  z-index: var(--header-z) !important;
}

/* Filter bar base */
.sticky-filters-bar {
  z-index: var(--filters-z);
}

/* While fixed under the header */
.sticky-filters-bar.is-fixed {
  z-index: var(--filters-z);     /* below header */
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}

/* When docked at the bottom of the grid (before footer), let it be even lower
   so it scrolls *behind* the header/navigation as you continue upward */
.sticky-filters-bar.is-docked {
  z-index: 1 !important;         /* definitely under header/nav */
  box-shadow: none;
}